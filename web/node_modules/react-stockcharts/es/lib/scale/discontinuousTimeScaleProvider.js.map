{"version":3,"sources":["../../../../src/lib/scale/discontinuousTimeScaleProvider.js"],"names":["timeFormat","timeFormatDefaultLocale","financeDiscontinuousScale","slidingWindow","zipper","identity","isNotDefined","defaultFormatters","levelDefinition","evaluateLevel","d","date","i","formatters","map","eachLevel","idx","level","length","format","find","l","discontinuousIndexCalculator","windowSize","undefinedValue","initialIndex","row","getTime","startOf30Seconds","startOfMinute","startOf5Minutes","startOf15Minutes","startOf30Minutes","startOfHour","startOfEighthOfADay","startOfQuarterDay","startOfHalfDay","startOfDay","startOfWeek","startOfMonth","startOfQuarter","startOfYear","index","discontinuousIndexCalculatorLocalTime","accumulator","prevDate","nowDate","getSeconds","getMinutes","getHours","getDay","getMonth","getFullYear","console","log","doStuff","realDateAccessor","inputDateAccessor","data","dateAccessor","calculate","source","misc","each","Date","discontinuousTimeScaleProviderBuilder","indexAccessor","indexMutator","withIndex","currentFormatters","discontinuousTimeScaleProvider","response","inputIndex","xScale","mergedData","combine","finalData","xAccessor","displayXAccessor","x","arguments","utc","offsetInMillis","getTimezoneOffset","setLocale","locale","indexCalculator"],"mappings":"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","file":"discontinuousTimeScaleProvider.js","sourcesContent":["\n\nimport { timeFormat, timeFormatDefaultLocale } from \"d3-time-format\";\n// import { map as d3Map } from \"d3-collection\";\n\nimport financeDiscontinuousScale from \"./financeDiscontinuousScale\";\nimport { slidingWindow, zipper, identity, isNotDefined } from \"../utils\";\nimport { defaultFormatters, levelDefinition } from \"./levels\";\n\nfunction evaluateLevel(d, date, i, formatters) {\n\treturn levelDefinition\n\t\t.map((eachLevel, idx) => {\n\t\t\treturn {\n\t\t\t\tlevel: levelDefinition.length - idx - 1,\n\t\t\t\tformat: formatters[eachLevel(d, date, i)]\n\t\t\t};\n\t\t})\n\t\t.find(l => !!l.format);\n}\n\nconst discontinuousIndexCalculator = slidingWindow()\n\t.windowSize(2)\n\t.undefinedValue((d, idx, { initialIndex, formatters }) => {\n\t\tconst i = initialIndex;\n\t\tconst row = {\n\t\t\tdate: d.getTime(),\n\t\t\tstartOf30Seconds: false,\n\t\t\tstartOfMinute: false,\n\t\t\tstartOf5Minutes: false,\n\t\t\tstartOf15Minutes: false,\n\t\t\tstartOf30Minutes: false,\n\t\t\tstartOfHour: false,\n\t\t\tstartOfEighthOfADay: false,\n\t\t\tstartOfQuarterDay: false,\n\t\t\tstartOfHalfDay: false,\n\t\t\tstartOfDay: true,\n\t\t\tstartOfWeek: false,\n\t\t\tstartOfMonth: false,\n\t\t\tstartOfQuarter: false,\n\t\t\tstartOfYear: false,\n\t\t};\n\t\tconst level = evaluateLevel(row, d, i, formatters);\n\t\treturn { ...row, index: i, ...level };\n\t});\n\nconst discontinuousIndexCalculatorLocalTime = discontinuousIndexCalculator\n\t.accumulator(([prevDate, nowDate], i, idx, { initialIndex, formatters }) => {\n\t\tconst startOf30Seconds = nowDate.getSeconds() % 30 === 0;\n\n\t\tconst startOfMinute = nowDate.getMinutes() !== prevDate.getMinutes();\n\t\tconst startOf5Minutes = startOfMinute && nowDate.getMinutes() % 5 <= prevDate.getMinutes() % 5;\n\t\tconst startOf15Minutes = startOfMinute && nowDate.getMinutes() % 15 <= prevDate.getMinutes() % 15;\n\t\tconst startOf30Minutes = startOfMinute && nowDate.getMinutes() % 30 <= prevDate.getMinutes() % 30;\n\n\t\tconst startOfHour = nowDate.getHours() !== prevDate.getHours();\n\n\t\tconst startOfEighthOfADay = startOfHour && nowDate.getHours() % 3 === 0;\n\t\tconst startOfQuarterDay = startOfHour && nowDate.getHours() % 6 === 0;\n\t\tconst startOfHalfDay = startOfHour && nowDate.getHours() % 12 === 0;\n\n\t\tconst startOfDay = nowDate.getDay() !== prevDate.getDay();\n\t\t// According to ISO calendar\n\t\t// Sunday = 0, Monday = 1, ... Saturday = 6\n\t\t// day of week of today < day of week of yesterday then today is start of week\n\t\tconst startOfWeek = nowDate.getDay() < prevDate.getDay();\n\t\t// month of today != month of yesterday then today is start of month\n\t\tconst startOfMonth = nowDate.getMonth() !== prevDate.getMonth();\n\t\t// if start of month and month % 3 === 0 then it is start of quarter\n\t\tconst startOfQuarter = startOfMonth && (nowDate.getMonth() % 3 <= prevDate.getMonth() % 3);\n\t\t// year of today != year of yesterday then today is start of year\n\t\tconst startOfYear = nowDate.getFullYear() !== prevDate.getFullYear();\n\n\t\tconst row = {\n\t\t\tdate: nowDate.getTime(),\n\t\t\tstartOf30Seconds,\n\t\t\tstartOfMinute,\n\t\t\tstartOf5Minutes,\n\t\t\tstartOf15Minutes,\n\t\t\tstartOf30Minutes,\n\t\t\tstartOfHour,\n\t\t\tstartOfEighthOfADay,\n\t\t\tstartOfQuarterDay,\n\t\t\tstartOfHalfDay,\n\t\t\tstartOfDay,\n\t\t\tstartOfWeek,\n\t\t\tstartOfMonth,\n\t\t\tstartOfQuarter,\n\t\t\tstartOfYear,\n\t\t};\n\t\tconst level = evaluateLevel(row, nowDate, i, formatters);\n\t\tif (level == null) {\n\t\t\tconsole.log(row);\n\t\t}\n\t\treturn { ...row, index: i + initialIndex, ...level };\n\t});\n\nfunction doStuff(realDateAccessor, inputDateAccessor, initialIndex, formatters) {\n\treturn function(data) {\n\t\tconst dateAccessor = realDateAccessor(inputDateAccessor);\n\t\tconst calculate = discontinuousIndexCalculatorLocalTime\n\t\t\t.source(dateAccessor)\n\t\t\t.misc({ initialIndex, formatters });\n\n\t\tconst index = calculate(data).map(each => {\n\t\t\tconst { format } = each;\n\t\t\treturn {\n\t\t\t\t// ...each,\n\t\t\t\tindex: each.index,\n\t\t\t\tlevel: each.level,\n\t\t\t\tdate: new Date(each.date),\n\t\t\t\tformat: timeFormat(format),\n\t\t\t};\n\t\t});\n\t\t/*\n\t\tvar map = d3Map();\n\t\tfor (var i = 0; i < data.length - 1; i++) {\n\n\t\t\tvar nextDate = dateAccessor(data[i + 1]);\n\t\t\tvar nowDate = dateAccessor(data[i]);\n\t\t\tvar diff = nextDate - nowDate;\n\n\t\t\tif (map.has(diff)) {\n\t\t\t\tvar count = parseInt(map.get(diff), 10) + 1;\n\t\t\t\tmap.set(diff, count);\n\t\t\t} else {\n\t\t\t\tmap.set(diff, 1);\n\t\t\t}\n\t\t}\n\n\t\tvar entries = map.entries().sort((a, b) => a.value < b.value);\n\n\t\t// For Renko/p&f\n\n\t\tvar interval = entries[0].value === 1\n\t\t\t? Math.round((dateAccessor(last(data)) - dateAccessor(head(data))) / data.length)\n\t\t\t: parseInt(entries[0].key, 10); */\n\n\t\t// return { index, interval };\n\t\treturn { index };\n\t};\n}\n\nexport function discontinuousTimeScaleProviderBuilder() {\n\tlet initialIndex = 0, realDateAccessor = identity;\n\tlet inputDateAccessor = d => d.date,\n\t\tindexAccessor = d => d.idx,\n\t\tindexMutator = (d, idx) => ({ ...d, idx }),\n\t\twithIndex;\n\n\tlet currentFormatters = defaultFormatters;\n\n\t// eslint-disable-next-line prefer-const\n\tlet discontinuousTimeScaleProvider = function(data) {\n\t\t/*\n\t\tconsole.warn(\"Are you sure you want to use a discontinuousTimeScale?\"\n\t\t\t+ \" Use this only if you have discontinuous data which\"\n\t\t\t+ \" needs to be displayed as continuous.\"\n\t\t\t+ \" If you have continuous data use a d3 scale like\"\n\t\t\t+ \" `d3.scaleTime`\"\n\t\t);\n\t\t*/\n\n\t\tlet index = withIndex;\n\n\t\tif (isNotDefined(index)) {\n\t\t\tconst response = doStuff(\n\t\t\t\trealDateAccessor,\n\t\t\t\tinputDateAccessor,\n\t\t\t\tinitialIndex,\n\t\t\t\tcurrentFormatters\n\t\t\t)(data);\n\n\t\t\tindex = response.index;\n\t\t}\n\t\t// console.log(interval, entries[0].key);\n\n\t\tconst inputIndex = index;\n\t\tconst xScale = financeDiscontinuousScale(\n\t\t\tinputIndex,\n\t\t);\n\n\t\tconst mergedData = zipper()\n\t\t\t.combine(indexMutator);\n\n\t\tconst finalData = mergedData(data, inputIndex);\n\n\t\treturn {\n\t\t\tdata: finalData,\n\t\t\txScale,\n\t\t\txAccessor: d => d && indexAccessor(d).index,\n\t\t\tdisplayXAccessor: realDateAccessor(inputDateAccessor),\n\t\t};\n\t};\n\n\tdiscontinuousTimeScaleProvider.initialIndex = function(x) {\n\t\tif (!arguments.length) {\n\t\t\treturn initialIndex;\n\t\t}\n\t\tinitialIndex = x;\n\t\treturn discontinuousTimeScaleProvider;\n\t};\n\tdiscontinuousTimeScaleProvider.inputDateAccessor = function(x) {\n\t\tif (!arguments.length) {\n\t\t\treturn inputDateAccessor;\n\t\t}\n\t\tinputDateAccessor = x;\n\t\treturn discontinuousTimeScaleProvider;\n\t};\n\tdiscontinuousTimeScaleProvider.indexAccessor = function(x) {\n\t\tif (!arguments.length) {\n\t\t\treturn indexAccessor;\n\t\t}\n\t\tindexAccessor = x;\n\t\treturn discontinuousTimeScaleProvider;\n\t};\n\tdiscontinuousTimeScaleProvider.indexMutator = function(x) {\n\t\tif (!arguments.length) {\n\t\t\treturn indexMutator;\n\t\t}\n\t\tindexMutator = x;\n\t\treturn discontinuousTimeScaleProvider;\n\t};\n\tdiscontinuousTimeScaleProvider.withIndex = function(x) {\n\t\tif (!arguments.length) {\n\t\t\treturn withIndex;\n\t\t}\n\t\twithIndex = x;\n\t\treturn discontinuousTimeScaleProvider;\n\t};\n\tdiscontinuousTimeScaleProvider.utc = function() {\n\t\trealDateAccessor = dateAccessor => d => {\n\t\t\tconst date = dateAccessor(d);\n\t\t\t// The getTimezoneOffset() method returns the time-zone offset from UTC, in minutes, for the current locale.\n\t\t\tconst offsetInMillis = date.getTimezoneOffset() * 60 * 1000;\n\t\t\treturn new Date(date.getTime() + offsetInMillis);\n\t\t};\n\t\treturn discontinuousTimeScaleProvider;\n\t};\n\tdiscontinuousTimeScaleProvider.setLocale = function(locale, formatters = null) {\n\t\tif (locale) {\n\t\t\ttimeFormatDefaultLocale(locale);\n\t\t}\n\t\tif (formatters) {\n\t\t\tcurrentFormatters = formatters;\n\t\t}\n\t\treturn discontinuousTimeScaleProvider;\n\t};\n\n\tdiscontinuousTimeScaleProvider.indexCalculator = function() {\n\t\treturn doStuff(realDateAccessor, inputDateAccessor, initialIndex, currentFormatters);\n\t};\n\n\treturn discontinuousTimeScaleProvider;\n}\n\n\n\n/* discontinuousTimeScaleProvider.utc = function(data,\n\t\tdateAccessor,\n\t\tindexAccessor,\n\t\tindexMutator) {\n\tvar utcDateAccessor = d => {\n\t\tvar date = dateAccessor(d);\n\t\t// The getTimezoneOffset() method returns the time-zone offset from UTC, in minutes, for the current locale.\n\t\tvar offsetInMillis = date.getTimezoneOffset() * 60 * 1000;\n\t\treturn new Date(date.getTime() + offsetInMillis);\n\t};\n\treturn discontinuousTimeScaleProvider(data, utcDateAccessor, indexAccessor, indexMutator);\n};*/\n\nexport default discontinuousTimeScaleProviderBuilder();\n"]}