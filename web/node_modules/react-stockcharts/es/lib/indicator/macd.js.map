{"version":3,"sources":["../../../../src/lib/indicator/macd.js"],"names":["rebind","merge","macd","baseIndicator","MACD","appearanceOptions","ALGORITHM_TYPE","base","type","fill","stroke","accessor","d","underlyingAlgorithm","mergedAlgorithm","algorithm","datum","indicator","data","options","Error"],"mappings":";;AAEA,SAASA,MAAT,EAAiBC,KAAjB,QAA8B,UAA9B;;AAEA,SAASC,IAAT,QAAqB,eAArB;;AAEA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,SAASC,QAAQC,iBAAjB,QAA0C,+BAA1C;;AAEA,IAAMC,iBAAiB,MAAvB;;AAEA,eAAe,YAAW;;AAEzB,KAAMC,OAAOJ,gBACXK,IADW,CACNF,cADM,EAEXG,IAFW,CAENJ,kBAAkBI,IAFZ,EAGXC,MAHW,CAGJL,kBAAkBK,MAHd,EAIXC,QAJW,CAIF;AAAA,SAAKC,EAAEV,IAAP;AAAA,EAJE,CAAb;;AAMA,KAAMW,sBAAsBX,MAA5B;;AAEA,KAAMY,kBAAkBb,QACtBc,SADsB,CACZF,mBADY,EAEtBZ,KAFsB,CAEhB,UAACe,KAAD,EAAQC,SAAR,EAAsB;AAAED,QAAMd,IAAN,GAAae,SAAb;AAAyB,EAFjC,CAAxB;;AAIA,KAAMA,YAAY,SAAZA,SAAY,CAASC,IAAT,EAA0C;AAAA,MAA3BC,OAA2B,uEAAjB,EAAElB,OAAO,IAAT,EAAiB;;AAC3D,MAAIkB,QAAQlB,KAAZ,EAAmB;AAClB,OAAI,CAACM,KAAKI,QAAL,EAAL,EAAsB,MAAM,IAAIS,KAAJ,yBAAgCd,cAAhC,yBAAN;AACtB,UAAOQ,gBAAgBI,IAAhB,CAAP;AACA;AACD,SAAOL,oBAAoBK,IAApB,CAAP;AACA,EAND;;AAQAlB,QAAOiB,SAAP,EAAkBV,IAAlB,EAAwB,IAAxB,EAA8B,UAA9B,EAA0C,QAA1C,EAAoD,MAApD,EAA4D,MAA5D,EAAoE,MAApE;AACAP,QAAOiB,SAAP,EAAkBJ,mBAAlB,EAAuC,SAAvC,EAAkD,iBAAlD;AACAb,QAAOiB,SAAP,EAAkBH,eAAlB,EAAmC,OAAnC,EAA4C,eAA5C;;AAEA,QAAOG,SAAP;AACA","file":"macd.js","sourcesContent":["\n\nimport { rebind, merge } from \"../utils\";\n\nimport { macd } from \"../calculator\";\n\nimport baseIndicator from \"./baseIndicator\";\nimport { MACD as appearanceOptions } from \"./defaultOptionsForAppearance\";\n\nconst ALGORITHM_TYPE = \"MACD\";\n\nexport default function() {\n\n\tconst base = baseIndicator()\n\t\t.type(ALGORITHM_TYPE)\n\t\t.fill(appearanceOptions.fill)\n\t\t.stroke(appearanceOptions.stroke)\n\t\t.accessor(d => d.macd);\n\n\tconst underlyingAlgorithm = macd();\n\n\tconst mergedAlgorithm = merge()\n\t\t.algorithm(underlyingAlgorithm)\n\t\t.merge((datum, indicator) => { datum.macd = indicator; });\n\n\tconst indicator = function(data, options = { merge: true }) {\n\t\tif (options.merge) {\n\t\t\tif (!base.accessor()) throw new Error(`Set an accessor to ${ALGORITHM_TYPE} before calculating`);\n\t\t\treturn mergedAlgorithm(data);\n\t\t}\n\t\treturn underlyingAlgorithm(data);\n\t};\n\n\trebind(indicator, base, \"id\", \"accessor\", \"stroke\", \"fill\", \"echo\", \"type\");\n\trebind(indicator, underlyingAlgorithm, \"options\", \"undefinedLength\");\n\trebind(indicator, mergedAlgorithm, \"merge\", \"skipUndefined\");\n\n\treturn indicator;\n}\n"]}