{"version":3,"sources":["../../../../src/lib/axes/AxisTicks.js"],"names":["React","Component","PropTypes","hexToRGBA","isNotDefined","identity","tickTransform_svg_axisX","scale","tick","Math","round","tickTransform_svg_axisY","Tick","props","transform","tickStroke","tickStrokeOpacity","textAnchor","fontSize","fontFamily","x","y","x2","y2","dy","children","propTypes","arrayOf","Number","string","number","node","isRequired","drawOnCanvasStatic","ctx","result","tickTransform","canvas_dy","format","origin","beginPath","moveTo","lineTo","stroke","fillText","AxisTicks","helper","ticks","map","idx","orient","oneOf","innerTickSize","tickFormat","func","tickPadding","array","tickValues","defaultProps","tickArguments","domain","baseFormat","d","sign","tickSpacing","max","xScale","yScale","xAxis","strokeStyle","font","fillStyle","textAlign","forEach"],"mappings":"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","file":"AxisTicks.js","sourcesContent":["\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { hexToRGBA, isNotDefined, identity } from \"../utils\";\n\nfunction tickTransform_svg_axisX(scale, tick) {\n\treturn [Math.round(scale(tick)), 0];\n}\n\nfunction tickTransform_svg_axisY(scale, tick) {\n\treturn [0, Math.round(scale(tick))];\n}\n\nclass Tick extends Component {\n\trender() {\n\t\tconst { transform, tickStroke, tickStrokeOpacity, textAnchor, fontSize, fontFamily } = this.props;\n\t\tconst { x, y, x2, y2, dy } = this.props;\n\t\treturn (\n\t\t\t<g className=\"tick\" transform={`translate(${ transform[0] }, ${ transform[1] })`} >\n\t\t\t\t<line shapeRendering=\"crispEdges\" opacity={tickStrokeOpacity} stroke={tickStroke} x2={x2} y2={y2} />\n\t\t\t\t<text\n\t\t\t\t\tdy={dy} x={x} y={y}\n\t\t\t\t\tfill={tickStroke}\n\t\t\t\t\tfontSize={fontSize}\n\t\t\t\t\tfontFamily={fontFamily}\n\t\t\t\t\ttextAnchor={textAnchor}>\n\t\t\t\t\t{this.props.children}\n\t\t\t\t</text>\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nTick.propTypes = {\n\ttransform: PropTypes.arrayOf(Number),\n\ttickStroke: PropTypes.string,\n\ttickStrokeOpacity: PropTypes.number,\n\ttextAnchor: PropTypes.string,\n\tfontSize: PropTypes.number,\n\tfontFamily: PropTypes.string,\n\tx: PropTypes.number,\n\ty: PropTypes.number,\n\tx2: PropTypes.number,\n\ty2: PropTypes.number,\n\tdy: PropTypes.string,\n\tchildren: PropTypes.node.isRequired,\n};\n\nTick.drawOnCanvasStatic = (tick, ctx, result) => {\n\tconst { scale, tickTransform, canvas_dy, x, y, x2, y2, format } = result;\n\n\tconst origin = tickTransform(scale, tick);\n\n\tctx.beginPath();\n\n\tctx.moveTo(origin[0], origin[1]);\n\tctx.lineTo(origin[0] + x2, origin[1] + y2);\n\tctx.stroke();\n\n\tctx.fillText(format(tick), origin[0] + x, origin[1] + y + canvas_dy);\n};\n\nclass AxisTicks extends Component {\n\trender() {\n\t\tconst result = AxisTicks.helper(this.props, this.props.scale);\n\t\tconst { ticks, scale, tickTransform, tickStroke, tickStrokeOpacity, dy, x, y, x2, y2, textAnchor, fontSize, fontFamily, format } = result;\n\n\t\treturn (\n\t\t\t<g>\n\t\t\t\t{ticks.map((tick, idx) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Tick key={idx} transform={tickTransform(scale, tick)}\n\t\t\t\t\t\t\ttickStroke={tickStroke} tickStrokeOpacity={tickStrokeOpacity}\n\t\t\t\t\t\t\tdy={dy} x={x} y={y}\n\t\t\t\t\t\t\tx2={x2} y2={y2} textAnchor={textAnchor}\n\t\t\t\t\t\t\tfontSize={fontSize} fontFamily={fontFamily}>{format(tick)}</Tick>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</g>\n\t\t);\n\t}\n}\n\nAxisTicks.propTypes = {\n\torient: PropTypes.oneOf([\"top\", \"bottom\", \"left\", \"right\"]).isRequired,\n\tinnerTickSize: PropTypes.number,\n\ttickFormat: PropTypes.func,\n\ttickPadding: PropTypes.number,\n\tticks: PropTypes.array,\n\ttickValues: PropTypes.array,\n\tscale: PropTypes.func.isRequired,\n\ttickStroke: PropTypes.string,\n\ttickStrokeOpacity: PropTypes.number,\n};\n\nAxisTicks.defaultProps = {\n\tinnerTickSize: 5,\n\ttickPadding: 6,\n\tticks: [10],\n\ttickStroke: \"#000\",\n\ttickStrokeOpacity: 1,\n};\n\nAxisTicks.helper = (props, scale) => {\n\tconst { orient, innerTickSize, tickFormat, tickPadding, fontSize, fontFamily } = props;\n\tconst { ticks: tickArguments, tickValues, tickStroke, tickStrokeOpacity } = props;\n\n\tconst ticks = isNotDefined(tickValues)\n\t\t? (scale.ticks\n\t\t\t? scale.ticks(...tickArguments)\n\t\t\t: scale.domain())\n\t\t: tickValues;\n\n\tconst baseFormat = scale.tickFormat\n\t\t? scale.tickFormat(...tickArguments)\n\t\t: identity;\n\n\tconst format = isNotDefined(tickFormat)\n\t\t? baseFormat\n\t\t: d => baseFormat(d) ? tickFormat(d) : \"\";\n\n\tconst sign = orient === \"top\" || orient === \"left\" ? -1 : 1;\n\tconst tickSpacing = Math.max(innerTickSize, 0) + tickPadding;\n\n\tlet tickTransform, x, y, x2, y2, dy, canvas_dy, textAnchor;\n\n\tif (orient === \"bottom\" || orient === \"top\") {\n\t\ttickTransform = tickTransform_svg_axisX;\n\t\tx2 = 0;\n\t\ty2 = sign * innerTickSize;\n\t\tx = 0;\n\t\ty = sign * tickSpacing;\n\t\tdy = sign < 0 ? \"0em\" : \".71em\";\n\t\tcanvas_dy = sign < 0 ? 0 : (fontSize * .71);\n\t\ttextAnchor = \"middle\";\n\t} else {\n\t\ttickTransform = tickTransform_svg_axisY;\n\t\tx2 = sign * innerTickSize;\n\t\ty2 = 0;\n\t\tx = sign * tickSpacing;\n\t\ty = 0;\n\t\tdy = \".32em\";\n\t\tcanvas_dy = (fontSize * .32);\n\t\ttextAnchor = sign < 0 ? \"end\" : \"start\";\n\t}\n\treturn { ticks, scale, tickTransform, tickStroke, tickStrokeOpacity, dy, canvas_dy, x, y, x2, y2, textAnchor, fontSize, fontFamily, format };\n};\n\nAxisTicks.drawOnCanvasStatic = (props, ctx, xScale, yScale) => {\n\tprops = { ...AxisTicks.defaultProps, ...props };\n\n\tconst { orient } = props;\n\tconst xAxis = (orient === \"bottom\" || orient === \"top\");\n\n\tconst result = AxisTicks.helper(props, xAxis ? xScale : yScale);\n\n\tconst { tickStroke, tickStrokeOpacity, textAnchor, fontSize, fontFamily } = result;\n\n\tctx.strokeStyle = hexToRGBA(tickStroke, tickStrokeOpacity);\n\n\tctx.font = `${ fontSize }px ${fontFamily}`;\n\tctx.fillStyle = tickStroke;\n\tctx.textAlign = textAnchor === \"middle\" ? \"center\" : textAnchor;\n\t// ctx.textBaseline = 'middle';\n\n\tresult.ticks.forEach((tick) => {\n\t\tTick.drawOnCanvasStatic(tick, ctx, result);\n\t});\n};\n\nexport default AxisTicks;\n"]}