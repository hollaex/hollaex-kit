{"version":3,"sources":["tooltip/index.jsx"],"names":["splitObject","obj","keys","picked","omitted","forEach","key","getDisabledCompatibleChildren","element","elementType","type","__ANT_BUTTON","__ANT_SWITCH","__ANT_CHECKBOX","props","disabled","style","spanStyle","display","cursor","width","block","buttonStyle","pointerEvents","child","className","Tooltip","onVisibleChange","visible","setState","isNoTitle","saveTooltip","node","tooltip","onPopupAlign","domNode","align","placements","getPlacements","placement","Object","filter","points","rect","getBoundingClientRect","transformOrigin","top","left","indexOf","height","offset","renderTooltip","getContextPopupContainer","getPopupContainer","getPrefixCls","state","customizePrefixCls","prefixCls","title","overlay","openClassName","getTooltipContainer","children","React","isValidElement","childProps","childCls","defaultVisible","getPopupDomNode","builtinPlacements","arrowPointAtCenter","autoAdjustOverflow","verticalArrowShift","nextProps","Component","defaultProps","transitionName","mouseEnterDelay","mouseLeaveDelay"],"mappings":"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","sourcesContent":["import React, { cloneElement } from 'react';\nimport { polyfill } from 'react-lifecycles-compat';\nimport RcTooltip from 'rc-tooltip';\nimport classNames from 'classnames';\nimport getPlacements from './placements';\nimport { ConfigConsumer } from '../config-provider';\nconst splitObject = (obj, keys) => {\n    const picked = {};\n    const omitted = Object.assign({}, obj);\n    keys.forEach(key => {\n        if (obj && key in obj) {\n            picked[key] = obj[key];\n            delete omitted[key];\n        }\n    });\n    return { picked, omitted };\n};\n// Fix Tooltip won't hide at disabled button\n// mouse events don't trigger at disabled button in Chrome\n// https://github.com/react-component/tooltip/issues/18\nfunction getDisabledCompatibleChildren(element) {\n    const elementType = element.type;\n    if ((elementType.__ANT_BUTTON ||\n        elementType.__ANT_SWITCH ||\n        elementType.__ANT_CHECKBOX ||\n        element.type === 'button') &&\n        element.props.disabled) {\n        // Pick some layout related style properties up to span\n        // Prevent layout bugs like https://github.com/ant-design/ant-design/issues/5254\n        const { picked, omitted } = splitObject(element.props.style, [\n            'position',\n            'left',\n            'right',\n            'top',\n            'bottom',\n            'float',\n            'display',\n            'zIndex',\n        ]);\n        const spanStyle = Object.assign({ display: 'inline-block' }, picked, { cursor: 'not-allowed', width: element.props.block ? '100%' : null });\n        const buttonStyle = Object.assign({}, omitted, { pointerEvents: 'none' });\n        const child = cloneElement(element, {\n            style: buttonStyle,\n            className: null,\n        });\n        return (<span style={spanStyle} className={element.props.className}>\n        {child}\n      </span>);\n    }\n    return element;\n}\nclass Tooltip extends React.Component {\n    constructor(props) {\n        super(props);\n        this.onVisibleChange = (visible) => {\n            const { onVisibleChange } = this.props;\n            if (!('visible' in this.props)) {\n                this.setState({ visible: this.isNoTitle() ? false : visible });\n            }\n            if (onVisibleChange && !this.isNoTitle()) {\n                onVisibleChange(visible);\n            }\n        };\n        this.saveTooltip = (node) => {\n            this.tooltip = node;\n        };\n        // 动态设置动画点\n        this.onPopupAlign = (domNode, align) => {\n            const placements = this.getPlacements();\n            // 当前返回的位置\n            const placement = Object.keys(placements).filter(key => placements[key].points[0] === align.points[0] &&\n                placements[key].points[1] === align.points[1])[0];\n            if (!placement) {\n                return;\n            }\n            // 根据当前坐标设置动画点\n            const rect = domNode.getBoundingClientRect();\n            const transformOrigin = {\n                top: '50%',\n                left: '50%',\n            };\n            if (placement.indexOf('top') >= 0 || placement.indexOf('Bottom') >= 0) {\n                transformOrigin.top = `${rect.height - align.offset[1]}px`;\n            }\n            else if (placement.indexOf('Top') >= 0 || placement.indexOf('bottom') >= 0) {\n                transformOrigin.top = `${-align.offset[1]}px`;\n            }\n            if (placement.indexOf('left') >= 0 || placement.indexOf('Right') >= 0) {\n                transformOrigin.left = `${rect.width - align.offset[0]}px`;\n            }\n            else if (placement.indexOf('right') >= 0 || placement.indexOf('Left') >= 0) {\n                transformOrigin.left = `${-align.offset[0]}px`;\n            }\n            domNode.style.transformOrigin = `${transformOrigin.left} ${transformOrigin.top}`;\n        };\n        this.renderTooltip = ({ getPopupContainer: getContextPopupContainer, getPrefixCls, }) => {\n            const { props, state } = this;\n            const { prefixCls: customizePrefixCls, title, overlay, openClassName, getPopupContainer, getTooltipContainer, } = props;\n            const children = props.children;\n            const prefixCls = getPrefixCls('tooltip', customizePrefixCls);\n            let { visible } = state;\n            // Hide tooltip when there is no title\n            if (!('visible' in props) && this.isNoTitle()) {\n                visible = false;\n            }\n            const child = getDisabledCompatibleChildren(React.isValidElement(children) ? children : <span>{children}</span>);\n            const childProps = child.props;\n            const childCls = classNames(childProps.className, {\n                [openClassName || `${prefixCls}-open`]: true,\n            });\n            return (<RcTooltip {...this.props} prefixCls={prefixCls} getTooltipContainer={getPopupContainer || getTooltipContainer || getContextPopupContainer} ref={this.saveTooltip} builtinPlacements={this.getPlacements()} overlay={overlay || title || ''} visible={visible} onVisibleChange={this.onVisibleChange} onPopupAlign={this.onPopupAlign}>\n        {visible ? cloneElement(child, { className: childCls }) : child}\n      </RcTooltip>);\n        };\n        this.state = {\n            visible: !!props.visible || !!props.defaultVisible,\n        };\n    }\n    static getDerivedStateFromProps(nextProps) {\n        if ('visible' in nextProps) {\n            return { visible: nextProps.visible };\n        }\n        return null;\n    }\n    getPopupDomNode() {\n        return this.tooltip.getPopupDomNode();\n    }\n    getPlacements() {\n        const { builtinPlacements, arrowPointAtCenter, autoAdjustOverflow } = this.props;\n        return (builtinPlacements ||\n            getPlacements({\n                arrowPointAtCenter,\n                verticalArrowShift: 8,\n                autoAdjustOverflow,\n            }));\n    }\n    isNoTitle() {\n        const { title, overlay } = this.props;\n        return !title && !overlay; // overlay for old version compatibility\n    }\n    render() {\n        return <ConfigConsumer>{this.renderTooltip}</ConfigConsumer>;\n    }\n}\nTooltip.defaultProps = {\n    placement: 'top',\n    transitionName: 'zoom-big-fast',\n    mouseEnterDelay: 0.1,\n    mouseLeaveDelay: 0.1,\n    arrowPointAtCenter: false,\n    autoAdjustOverflow: true,\n};\npolyfill(Tooltip);\nexport default Tooltip;\n"],"file":"index.js"}